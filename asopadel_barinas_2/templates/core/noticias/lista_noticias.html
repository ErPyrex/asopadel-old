{% extends 'base.html' %}
{% block title %}Noticias publicadas{% endblock %}

{% block content %}
<h2>ğŸ“° Noticias publicadas</h2>
<a href="{% url 'core:admin_create_noticia' %}" class="btn">â• Crear nueva noticia</a>

<ul class="lista-noticias">
  {% for noticia in noticias %}
    <li>
      <h3>{{ noticia.titulo }}</h3>
      <p>{{ noticia.cuerpo|truncatewords:30 }}</p>
      <small>ğŸ“… {{ noticia.fecha_publicacion }} | âœï¸ {{ noticia.autor.get_full_name }}</small>

      <!-- Botones de acciÃ³n -->
      <div class="acciones-noticia">
        <a href="{% url 'core:admin_edit_noticia' noticia.id %}" class="btn-editar">âœï¸ Editar</a>

        <!-- EliminaciÃ³n con confirmaciÃ³n JS -->
        <form action="{% url 'core:admin_delete_noticia' noticia.id %}" method="post" style="display:inline;" onsubmit="return confirm('Â¿EstÃ¡s seguro de que deseas eliminar esta noticia?');">
          {% csrf_token %}
          <button type="submit" class="btn-eliminar">ğŸ—‘ï¸ Eliminar</button>
        </form>
      </div>
    </li>
  {% empty %}
    <li>No hay noticias publicadas aÃºn.</li>
  {% endfor %}
</ul>
{% endblock %}