{% extends 'base.html' %}
{% block title %}Panel del Administrador{% endblock %}

{% block content %}
<!-- Cargamos Tailwind CSS y configuramos la paleta de colores -->
<script src="https://cdn.tailwindcss.com"></script>
<style>
    tailwind.config = {
        theme: {
            extend: {
                colors: {
                    'navy-dark': '#0A1C36', /* Azul Marino */
                    'sky-padel': '#00BFFF', /* Celeste Vibrante */
                    'gray-light': '#F8F9FA', /* Fondo */
                    'accent-green': '#10B981', /* Verde para crear/acciones positivas */
                    'accent-red': '#EF4444', /* Rojo para peligro/cerrar sesiÃ³n */
                },
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                }
            }
        }
    }

    /* Estilos base para el layout */
    .admin-layout {
        display: grid;
        grid-template-columns: 280px 1fr; /* 280px para sidebar, el resto para main */
        min-height: 100vh;
    }

    /* Media query para hacerlo responsivo */
    @media (max-width: 1024px) {
        .admin-layout {
            grid-template-columns: 1fr; /* Pila en mÃ³vil */
        }
        .sidebar {
            width: 100%;
            position: relative;
            padding-bottom: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    }

    /* Estilo del botÃ³n de logout */
    .btn-rojo {
        background-color: theme('colors.accent-red');
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-weight: 600;
        color: white;
        transition: background-color 0.2s;
    }
    .btn-rojo:hover {
        background-color: #DC2626;
    }
</style>

<div class="admin-layout">
    <!-- Sidebar -->
    <aside class="sidebar bg-navy-dark text-white p-6 flex flex-col justify-between">
        <div>
            <div class="text-3xl font-extrabold mb-8 tracking-wide">ASO PADÃ‰L</div>
            <nav class="space-y-3">
                <!-- NavegaciÃ³n Primaria -->
                <a href="{% url 'core:admin_dashboard' %}" class="flex items-center p-3 rounded-xl hover:bg-sky-padel hover:text-navy-dark font-medium transition duration-200 bg-sky-padel text-navy-dark">
                    <span class="mr-3 text-xl">ğŸ“Š</span> Dashboard
                </a>
                <a href="{% url 'core:admin_noticias_list' %}" class="flex items-center p-3 rounded-xl hover:bg-gray-700 transition duration-200">
                    <span class="mr-3 text-xl">ğŸ“°</span> Noticias
                </a>
                <a href="{% url 'core:admin_torneos_list' %}" class="flex items-center p-3 rounded-xl hover:bg-gray-700 transition duration-200">
                    <span class="mr-3 text-xl">ğŸ†</span> Torneos
                </a>
                <a href="{% url 'core:admin_player_list' %}" class="flex items-center p-3 rounded-xl hover:bg-gray-700 transition duration-200">
                    <span class="mr-3 text-xl">ğŸ¾</span> Jugadores
                </a>
                <a href="{% url 'core:admin_canchas_list' %}" class="flex items-center p-3 rounded-xl hover:bg-gray-700 transition duration-200">
                    <span class="mr-3 text-xl">ğŸŸï¸</span> Canchas
                </a>
                <a href="{% url 'core:admin_referee_list' %}" class="flex items-center p-3 rounded-xl hover:bg-gray-700 transition duration-200">
                    <span class="mr-3 text-xl">ğŸ‘¨â€âš–ï¸</span> Ãrbitros
                </a>
            </nav>
        </div>

        <!-- Usuario y Logout -->
        <div class="admin-user border-t border-gray-700 pt-6 mt-6">
            <span class="block text-sm mb-3">ğŸ‘‹ Bienvenido, {{ user.first_name }}</span>
            <form method="POST" action="{% url 'users:logout' %}">
                {% csrf_token %}
                <button type="submit" class="btn-rojo w-full text-center">
                    ğŸ”“ Cerrar sesiÃ³n
                </button>
            </form>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="panel-admin p-8 lg:p-10 bg-gray-light">
        <h1 class="text-3xl lg:text-4xl font-extrabold text-navy-dark mb-2">Dashboard de AdministraciÃ³n</h1>
        <p class="text-gray-500 text-lg mb-8">Gestiona el contenido, usuarios y competencias de ASO PADÃ‰L.</p>

        <!-- SecciÃ³n 1: MÃ©tricas Clave (Siempre visible) -->
        <section class="mb-10">
            <h2 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">MÃ©tricas RÃ¡pidas</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <!-- Card Jugadores -->
                <div class="bg-white p-5 rounded-xl shadow-lg border-t-4 border-sky-padel">
                    <p class="text-4xl font-extrabold text-navy-dark">{{ total_jugadores }}</p>
                    <p class="text-sm text-gray-500 mt-1">ğŸ¾ Jugadores</p>
                </div>
                <!-- Card Ãrbitros -->
                <div class="bg-white p-5 rounded-xl shadow-lg border-t-4 border-accent-green">
                    <p class="text-4xl font-extrabold text-navy-dark">{{ total_arbitros }}</p>
                    <p class="text-sm text-gray-500 mt-1">ğŸ‘¨â€âš–ï¸ Ãrbitros</p>
                </div>
                <!-- Card Canchas -->
                <div class="bg-white p-5 rounded-xl shadow-lg border-t-4 border-yellow-500">
                    <p class="text-4xl font-extrabold text-navy-dark">{{ total_canchas }}</p>
                    <p class="text-sm text-gray-500 mt-1">ğŸŸï¸ Canchas</p>
                </div>
                <!-- Card Torneos -->
                <div class="bg-white p-5 rounded-xl shadow-lg border-t-4 border-accent-red">
                    <p class="text-4xl font-extrabold text-navy-dark">{{ total_torneos }}</p>
                    <p class="text-sm text-gray-500 mt-1">ğŸ† Torneos Activos</p>
                </div>
            </div>
        </section>

        <!-- SecciÃ³n 2: Acciones RÃ¡pidas (Lo mÃ¡s usado) -->
        <section class="mb-10">
            <h2 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">Acciones Prioritarias</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <!-- Card Crear Noticia -->
                <a href="{% url 'core:admin_create_noticia' %}" class="group bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-l-4 border-sky-padel flex flex-col justify-between h-full">
                    <div>
                        <p class="text-2xl font-bold text-navy-dark">â• Crear Noticia</p>
                        <p class="text-sm text-gray-500 mt-1">Publica comunicados o eventos.</p>
                    </div>
                    <span class="mt-4 text-sky-padel group-hover:underline font-semibold text-right">Ir ahora &rarr;</span>
                </a>
                
                <!-- Card Crear Torneo -->
                <a href="{% url 'core:admin_create_tournament' %}" class="group bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-l-4 border-accent-green flex flex-col justify-between h-full">
                    <div>
                        <p class="text-2xl font-bold text-navy-dark">ğŸ† Nuevo Torneo</p>
                        <p class="text-sm text-gray-500 mt-1">Configura una nueva competencia.</p>
                    </div>
                    <span class="mt-4 text-accent-green group-hover:underline font-semibold text-right">Ir ahora &rarr;</span>
                </a>

                <!-- Card Registrar Cancha -->
                <a href="{% url 'core:admin_create_court' %}" class="group bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-l-4 border-navy-dark flex flex-col justify-between h-full">
                    <div>
                        <p class="text-2xl font-bold text-navy-dark">ğŸŸï¸ Registrar Cancha</p>
                        <p class="text-sm text-gray-500 mt-1">AÃ±ade o actualiza una cancha.</p>
                    </div>
                    <span class="mt-4 text-navy-dark group-hover:underline font-semibold text-right">Ir ahora &rarr;</span>
                </a>
            </div>
        </section>


        <!-- SecciÃ³n 3: GestiÃ³n Detallada (OrganizaciÃ³n LÃ³gica) -->
        <section>
            <h2 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">GestiÃ³n Detallada</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- Bloque 1: Padel (Competencia) -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-sky-padel">
                    <h3 class="text-2xl font-semibold text-sky-padel mb-4 flex items-center">
                        <span class="text-3xl mr-3">ğŸ¾</span> GESTIÃ“N DE PADÃ‰L
                    </h3>
                    <p class="text-gray-500 mb-4">Administra los torneos, jugadores y Ã¡rbitros de la asociaciÃ³n.</p>
                    <div class="space-y-3">
                        <a href="{% url 'core:admin_torneos_list' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸ† Torneos (<span class="font-bold">{{ total_torneos }}</span>)
                        </a>
                        <a href="{% url 'core:admin_player_list' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸ¾ Jugadores (<span class="font-bold">{{ total_jugadores }}</span>)
                        </a>
                        <a href="{% url 'core:admin_referee_list' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸ‘¨â€âš–ï¸ Ãrbitros (<span class="font-bold">{{ total_arbitros }}</span>)
                        </a>
                    </div>
                </div>

                <!-- Bloque 2: Infraestructura y Contenido -->
                <div class="bg-white p-6 rounded-xl shadow-lg border-t-4 border-navy-dark">
                    <h3 class="text-2xl font-semibold text-navy-dark mb-4 flex items-center">
                        <span class="text-3xl mr-3">âš™ï¸</span> AJUSTES & CONTENIDO
                    </h3>
                    <p class="text-gray-500 mb-4">Edita la informaciÃ³n de la pÃ¡gina principal y las canchas.</p>
                    <div class="space-y-3">
                        <a href="{% url 'core:admin_canchas_list' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸŸï¸ Canchas (<span class="font-bold">{{ total_canchas }}</span>)
                        </a>
                        <a href="{% url 'core:admin_noticias_list' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸ“° Listar Noticias
                        </a>
                        <a href="{% url 'core:admin_edit_hero' %}" class="block bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition duration-150">
                            ğŸ–‹ï¸ Editar Hero del Home
                        </a>
                    </div>
                </div>

            </div>
        </section>

<!-- SecciÃ³n 4: Estado Operacional de Canchas -->
<section class="mb-10">
  <h2 class="text-xl font-bold text-gray-700 mb-4 border-b pb-2">ğŸŸ¢ Estado Operacional de Canchas</h2>
  <div class="bg-white p-6 rounded-xl shadow-lg">
    <table class="w-full text-sm text-left text-gray-700">
      <thead class="bg-gray-200 text-gray-800">
        <tr>
          <th>#</th>
          <th>Cancha</th>
          <th>Tipo</th>
          <th>UbicaciÃ³n</th>
          <th>Estado</th>
          <th>AcciÃ³n</th>
        </tr>
      </thead>
      <tbody>
        {% for cancha in canchas %}
          <tr class="border-b">
            <td>{{ forloop.counter }}</td>
            <td>{{ cancha.nombre }}</td>
            <td>{{ cancha.tipo }}</td>
            <td>{{ cancha.ubicacion }}</td>
            <td>{{ cancha.estado }}</td>
            <td>
              <a href="{% url 'core:calendario_cancha' cancha.id %}" class="text-blue-600 hover:underline">Ver Calendario</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>


        <!-- Mensaje al final del panel -->
        <div class="mt-12 text-center text-gray-400 text-sm">
            <p>&copy; 2025 ASO PADÃ‰L. Panel de AdministraciÃ³n. VersiÃ³n 1.0</p>
        </div>
    </main>
</div>
{% endblock %}