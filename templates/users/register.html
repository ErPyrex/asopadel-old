{% extends 'base.html' %}
{% load static %}
{% block title %}Registro de Usuario | ASOPADEL{% endblock %}
{% block content %}
    <div class="row justify-content-center py-5">
        <div class="col-lg-8">
            <div class="card border-0 shadow-lg ranking-card mb-4 overflow-hidden">
                <!-- Decoración superior Premium -->
                <div style="height: 6px;
                            background: linear-gradient(90deg, #0EA5E9, #3B82F6, #10B981)"></div>
                <div class="card-body p-4 p-md-5">
                    <div class="text-center mb-5">
                        <div class="icon-holder mx-auto mb-3"
                             style="width: 60px;
                                    height: 60px;
                                    background: rgba(16, 185, 129, 0.1);
                                    color: #10B981">
                            <i class="ti ti-user-plus fs-1"></i>
                        </div>
                        <h2 class="fw-bold mb-2">Crear nueva cuenta</h2>
                        <p class="text-muted">Completa los datos para unirte a la mayor comunidad de pádel</p>
                    </div>
                    {% if form.errors %}
                        <div class="alert alert-danger border-0 shadow-sm mb-5 p-4 rounded-4"
                             role="alert">
                            <div class="d-flex align-items-center mb-3">
                                <i class="ti ti-alert-circle me-2 fs-4"></i>
                                <strong class="text-uppercase small ls-1">Errores detectados</strong>
                            </div>
                            <ul class="mb-0 small fw-bold">
                                {% for field in form %}
                                    {% for error in field.errors %}<li>{{ field.label }}: {{ error }}</li>{% endfor %}
                                {% endfor %}
                                {% for error in form.non_field_errors %}<li>{{ error }}</li>{% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                    <form method="POST"
                          action="{% url 'users:register' %}"
                          novalidate
                          autocomplete="off">
                        {% csrf_token %}
                        <!-- Sección 1: Info Personal -->
                        <div class="mb-5">
                            <div class="d-flex align-items-center mb-4 pb-2 border-bottom">
                                <div class="icon-holder me-3" style="width: 2.5rem; height: 2.5rem;">
                                    <i class="ti ti-id-badge fs-4"></i>
                                </div>
                                <h5 class="fw-bold mb-0">Información Personal</h5>
                            </div>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <label for="{{ form.cedula.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Cédula
                                    </label>
                                    <input type="text"
                                           name="{{ form.cedula.name }}"
                                           id="{{ form.cedula.id_for_label }}"
                                           placeholder="Ej: 12345678"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           value="{% if form.cedula.value %}{{ form.cedula.value }}{% endif %}"
                                           required>
                                    <small class="text-muted" style="font-size: 11px;">Mínimo 7 caracteres, sin puntos ni guiones</small>
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.email.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Correo Electrónico
                                    </label>
                                    <input type="email"
                                           name="{{ form.email.name }}"
                                           id="{{ form.email.id_for_label }}"
                                           placeholder="tu@email.com"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           value="{% if form.email.value %}{{ form.email.value }}{% endif %}"
                                           required>
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.first_name.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Nombre
                                    </label>
                                    <input type="text"
                                           name="{{ form.first_name.name }}"
                                           id="{{ form.first_name.id_for_label }}"
                                           placeholder="Tu nombre"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}"
                                           required>
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.last_name.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Apellido
                                    </label>
                                    <input type="text"
                                           name="{{ form.last_name.name }}"
                                           id="{{ form.last_name.id_for_label }}"
                                           placeholder="Tu apellido"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}"
                                           required>
                                </div>
                                <div class="col-12">
                                    <label for="{{ form.telefono.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Teléfono de contacto
                                    </label>
                                    <input type="text"
                                           name="{{ form.telefono.name }}"
                                           id="{{ form.telefono.id_for_label }}"
                                           placeholder="Ej: 04141234567"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           value="{% if form.telefono.value %}{{ form.telefono.value }}{% endif %}"
                                           required>
                                </div>
                            </div>
                        </div>
                        <!-- Sección 2: Seguridad -->
                        <div class="mb-5">
                            <div class="d-flex align-items-center mb-4 pb-2 border-bottom">
                                <div class="icon-holder me-3"
                                     style="width: 2.5rem;
                                            height: 2.5rem;
                                            background: rgba(59, 130, 246, 0.1);
                                            color: #3B82F6">
                                    <i class="ti ti-lock-square fs-4"></i>
                                </div>
                                <h5 class="fw-bold mb-0">Seguridad de la Cuenta</h5>
                            </div>
                            <div class="row g-4">
                                <div class="col-md-6">
                                    <label for="{{ form.password1.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Nueva Contraseña
                                    </label>
                                    <input type="password"
                                           name="{{ form.password1.name }}"
                                           id="{{ form.password1.id_for_label }}"
                                           placeholder="Mínimo 8 caracteres"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           required>
                                </div>
                                <div class="col-md-6">
                                    <label for="{{ form.password2.id_for_label }}"
                                           class="form-label fw-bold small text-uppercase text-secondary ls-1">
                                        Confirmar Contraseña
                                    </label>
                                    <input type="password"
                                           name="{{ form.password2.name }}"
                                           id="{{ form.password2.id_for_label }}"
                                           placeholder="Repite la contraseña"
                                           class="form-control py-3 bg-light bg-opacity-50"
                                           required>
                                </div>
                            </div>
                        </div>
                        <!-- Sección 3: Rol -->
                        <div class="mb-5">
                            <div class="d-flex align-items-center mb-4 pb-2 border-bottom">
                                <div class="icon-holder me-3"
                                     style="width: 2.5rem;
                                            height: 2.5rem;
                                            background: rgba(245, 158, 11, 0.1);
                                            color: #F59E0B">
                                    <i class="ti ti-ball-tennis fs-4"></i>
                                </div>
                                <h5 class="fw-bold mb-0">¿Cómo participarás?</h5>
                            </div>
                            <div class="row g-3">
                                {% for value, label in form.role.field.choices %}
                                    <div class="col-sm-6">
                                        <div class="card h-100 role-card {% if form.role.value == value %}selected{% endif %} border shadow-sm"
                                             onclick="selectRole('{{ value }}')">
                                            <div class="card-body text-center p-4">
                                                <div class="role-icon mb-3">
                                                    {% if value == 'es_jugador' %}
                                                        <div class="icon-holder mx-auto"
                                                             style="width: 60px;
                                                                    height: 60px;
                                                                    background: rgba(245, 158, 11, 0.1);
                                                                    color: var(--color-warning)">
                                                            <i class="ti ti-ball-tennis fs-1"></i>
                                                        </div>
                                                    {% elif value == 'es_arbitro' %}
                                                        <div class="icon-holder mx-auto"
                                                             style="width: 60px;
                                                                    height: 60px;
                                                                    background: var(--ui-icon-bg);
                                                                    color: var(--color-primary)">
                                                            <i class="ti ti-gavel fs-1"></i>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                                <h6 class="fw-bold mb-1">{{ label }}</h6>
                                                <p class="text-muted mb-3 small">
                                                    {% if value == 'es_jugador' %}
                                                        Participa en torneos y suma puntos en el ranking oficial.
                                                    {% elif value == 'es_arbitro' %}
                                                        Gestiona y arbitra partidos oficiales de la asociación.
                                                    {% endif %}
                                                </p>
                                                <div class="form-check d-flex justify-content-center">
                                                    <input class="form-check-input role-radio"
                                                           type="radio"
                                                           name="{{ form.role.name }}"
                                                           id="role_{{ value }}"
                                                           value="{{ value }}"
                                                           {% if form.role.value == value %}checked{% endif %}
                                                           required>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="d-grid pt-3">
                            <button type="submit"
                                    class="btn btn-primary py-3 fw-bold rounded-pill shadow-sm">
                                <span>Completar Registro</span> <i class="ti ti-circle-check ms-2"></i>
                            </button>
                        </div>
                    </form>
                </div>
                <div class="card-footer bg-light border-0 text-center py-4">
                    <p class="mb-0 text-muted small">
                        ¿Ya tienes una cuenta registrada?
                        <a href="{% url 'users:login' %}"
                           class="fw-bold text-primary text-decoration-none">Inicia sesión</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
    <style>
  .role-card {
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid #E2E8F0 !important;
    background: #F8FAFC;
  }

  .role-card:hover {
    transform: translateY(-4px);
    border-color: var(--color-primary) !important;
    background: white;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
  }

  .role-card.selected {
    border-color: var(--color-primary) !important;
    background: white;
    box-shadow: 0 10px 20px rgba(14, 165, 233, 0.1);
  }

  .role-icon {
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .role-radio {
    border-color: #CBD5E1;
    width: 1.25rem;
    height: 1.25rem;
  }

  .role-radio:checked {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
  }
    </style>
    <script>
  function selectRole(value) {
    document.querySelectorAll('.role-card').forEach(card => card.classList.remove('selected'));
    const clickedCard = event.currentTarget;
    clickedCard.classList.add('selected');
    const radio = document.getElementById('role_' + value);
    if (radio) radio.checked = true;
  }
    </script>
{% endblock %}
